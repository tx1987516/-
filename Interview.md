##面试题整理


1.异步、同步、阻塞和非阻塞

答：
* 同步和异步是指你对一个请求的处理，是直接返回结果，还是收到请求先回收到请求的响应，而结果再通过回调返回or请求方自己来取。
* 阻塞与非阻塞是对一个线程而言。你是在这个线程里把所有操作由上至下依次执行完。还是在其中有一些操作，开启一个子线程。主线程并不会等这个子线程

2.oo 面向对象

答：面向对象主要体现在封装、继承、多态三个概念，多态涉及JVM中的静态分派实现细节，继承涉及到JVM在运行期的动态分派实施细节

3.HashMap原理，HashMap在java8中的改变，ConcurrentHashMap的原理

答：
* HashMap本质上是一个数组，每一个元素都是一个entry链表，HashMap不是线程安全的，在高并发下，可能会出现链表成环.

* HashMap的初始大小是16，为什么不是10，或者其他，因为在对key进行Hash计算再计算index的时候采用了位与运算，最终index是由Hash值的后几位确定，能保证数据的均匀分配。

* java8的Hash实现加入了红黑树算法。

* ConcurrentHashMap 由一堆segment组成，没一个segment都是一个Map，每一个Map有它自己单独锁，在get和put的过程中都需要两次index才能定位到具体位置，本质上就是降低颗粒度，使具有高并发的能力。

* ConcurrentHashMap在高并发才统计size采用的悲观锁转乐观锁的方案，先统计每一个segment的size和修改次数，如不同则以自旋的方式再次统计，自旋到一定次数后则采用悲观锁全局加锁，再进行统计。

4.js闭包 

答：
* 表现出来的就是函数作为返回值，当一个函数返回了一个函数后，其内部的局部变量还被新函数引用，该函数延迟执行；

* js创建一个闭包，就相当于打开一个作用域，里面的变量外部不能访问，形成一个封闭独立的空间；
* 基本上所有的框架都是一个闭包，不影响自己写的js。

5.dubbo分布式框架知识点

答

* 集群容错、负载均衡、直连提供者、只订阅、只注册、静态服务、多协议、多注册中心、服务分组、分组聚合、参数验证、结果缓存、上下文信息、异步条用、延迟暴露、并发控制、令牌验证、服务降级、优雅停机、日志适配、线程栈自动dump

6.并发包知识点

答：

* 并发下有原子性操作包，锁包，还有一些其他的。


* atomic含对基本数据、数组中的基本数据、对类中的基本数据进行操作，


* locks包下包含接口Lock，Condition，ReadWriteLock三大接口，以AQS为核心实现了可重入锁，读写分离锁，独占锁，AQSLong版，LockSupport底层依赖Unsafe实现，是并发包中很多并发工具控制机制的基础，提供park和unpark方法实现线程阻塞和解除线程阻塞，

* 并发包下有以Concurrent开头的无锁机制的并发高性能集合，以CopyOnWrite开头的读写分离机制的高并发下高性能集合，有Semaphore，CountDownLatch，CyclicBarrier线程通信工具对象，有一系列数组，链表，阻塞，延迟，双向，优先，0容量队列，有线程池工具类

* Executors提供了创建固定数量线程，单线程，缓存线程，计划任务线程池的方法还提供了任务拆分交叉执行线程池。

7.单例模式

答

* 懒汉模式（双重检测机制，线程安全，volatile），饿汉模式，静态内部类，枚举

8.aop 

答
* Aop的目标就是重用通用功能。织入时期有编译期、类加载期、运行期三中不同情况，编译期需要特殊的编译器AspectJ就是，类加载期织入需要特殊的类加载器，可以在目标类被引入应用之前增强该目标类的字节码，SpringAOP就是在运行期织入
* SpringAOP构建在动态代理基础上的，因此，支持仅局限于方法的拦截，而要实现对构造器或属性的拦截，需要额外学习AspectJ，AspectJ是以JAVA语言扩展的方式实现的

9.成员变量初始化赋值

答

* 在类加载的准备阶段开始对被static修饰的对象初始化零值，特殊情况，如果是被final修饰，则会在准备阶段初始化常量属性指定的值

* 在初始化阶段<clinit>()方法中进行赋值，<clinit>()由编译器收集类中的所有类变量的赋值动作和静态语句块语句合并产生的

* 静态语句块只能访问定义在静态语句块之前的变量，定义在后的变量可以赋值但是不能访问；父类的<clinit>()方法优先执行

* 编译期在进行标注检查的时候会出现常量折叠动作如 int a=1+2会被折叠成3

10.消息队列的应用场景

答

* 异步处理（异步并行处理等）
* 应用解耦（常见分布式系统中）
* 流量削锋（常见团购，秒杀在应用前端加入消息队列）
* kafka日志处理

11.秒杀系统的架构

12. GTS细节

13. jsp 9打内置对象

答

* 输入输出对象 ，request 、response、out
* 通信对象 pageContext、 session、application
* servlet对象 page本身，config
* 异常处理对象 exception

14。jvm组成、 算法，垃圾回收器、类加载机制

答

* jvm组成 java堆(eden,from,to,老年代)，java虚拟机栈、方法区、本地方法栈、程序计数器（字节码解释器工作时就是改变这个计数器的值）、直接内存、java8去掉方法区，多了一个元空间

* 垃圾回收算法，整体采用分代收集算法。有标记-清除算法（mark-sweep）、复制算法、标记-整理算法（mark-compact）

* 垃圾回收器 （serial连续收集器 ，ParNew并行收集器）/(Serial Old,CMS(concurrent mark sweep));Parallel Scavenge(吞吐量优先收集器)/(Parallel Old,Serial Old)  并发，并行多了一个并发标记的阶段

* 类加载机制 启动加载器（lib 或-Xbootclasspath参数），扩展加载器（lib/ext或java.ext.dirs系统变量），应用程序加载器（classpath），自定义加载器，双亲委派机制

15.redis 做分布式锁

16.segment底层的实现

17.++i;i++底层实现
